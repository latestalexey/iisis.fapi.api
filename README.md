# iisis.fapi.api
База кроссов автозапчастей FAPI. Описание доступа через API

**Получить объект кроссы**
----
Возвращает json объект AnalogList

* **URL**

http://fapi.iisis.ru/fapi/v2/analogList

* **Method:**
  
  `GET`
  
*  **URL Параметры**

   **Обязательные:**
 
    `n=[string]` - номер искомой детали<br />
    `ui=[string]` - идентификатор пользователя

   **Опционально:**
 
   `mfd=[string]` - наименование бренда для получения кроссов по конкретной детали

* **Request Headers**

   `Accept:application/json` <br />
   `Cache-Control:no-cache` <br />
    
* **При успешном ответе:**
  
  * **Code:** 200 <br />
    **Content:** 
  ```
    {
      "manufacturerList": {
        "mf": [
          {
            "i": 0,
            "ds": "NPS",
            "da": "NPS"
          },
          {
            "i": 1,
            "ds": "CHEVROLET",
            "da": "CHEVROLET"
          },
          {
            "i": 2,
            "ds": "DAEWOO",
            "da": "DAEWOO"
          }
        ]
      },
      "productList": {
        "p": [
          {
            "i": 0,
            "mfi": 0,
            "ns": "d735o05",
            "n": "D735O05",
            "d": "Буфер"
          },
          {
            "i": 1,
            "mfi": 0,
            "ns": "96235861",
            "n": "96235861",
            "d": ""
          },
          {
            "i": 2,
            "mfi": 1,
            "ns": "96235861",
            "n": "96235861",
            "d": ""
          },
          {
            "i": 3,
            "mfi": 2,
            "ns": "96235861",
            "n": "96235861",
            "d": ""
          }
        ]
      },
      "analogList": {
        "a": [
          {
            "i": 73347655,
            "pri": 0,
            "si": 8,
            "di": 53,
            "pi": 0,
            "mfi": 0,
            "ns": "d735o05",
            "pai": 1,
            "mfai": 0,
            "nsa": "96235861",
            "_int": 0,
            "rm": 0,
            "rp": 2
          },
          {
            "i": 197698468,
            "pri": 91,
            "si": 8,
            "di": 118,
            "pi": 0,
            "mfi": 0,
            "ns": "d735o05",
            "pai": 2,
            "mfai": 1,
            "nsa": "96235861",
            "_int": 0,
            "rm": 0,
            "rp": 1
          },
          {
            "i": 199038906,
            "pri": 91,
            "si": 8,
            "di": 118,
            "pi": 0,
            "mfi": 0,
            "ns": "d735o05",
            "pai": 3,
            "mfai": 2,
            "nsa": "96235861",
            "_int": 0,
            "rm": 0,
            "rp": 1
          }
        ]
      },
      "sourceList": {},
      "messageList": {
        "m": []
      }
    }
    
 
* **Ошибка ответа:**

  * **Code:** 500 Internal Server Error <br />

  OR

  * **Code:** 200 <br />
    **Content:** 
   ```
    {
      "manufacturerList": {},
      "productList": {},
      "analogList": {},
      "sourceList": {},
      "messageList": {
        "m": [
          {
            "i": 1,
            "l": 0,
            "d": "Описание ошибки"
          }
        ]
      }
    }


* **Описание:**

  `manufacturerList` - таблица общего списка брендов<br />
  `productList`		- таблица общего списка деталей<br />
  `analogList` - таблица кроссов. Она то и определяет кроссирующую связь<br />
  `sourceList` - таблица источников(пока не нужно)<br />
  
* **Описание полей таблиц:**  
  `i`- индекс<br />
  `ui` - UUID строки(не нужно на текущий момент)<br />
  `di` - внешний ключ на документ, которым была добавлена строка таблицы(не нужно на данный момент)<br />
  `ds` - стандартизированное описание бренда(в верхнем регистре)<br />
  `da` - описание бренда без спец. символов(может применяться в качестве уникального индекса в различных ситуациях при манипуляциях с данными)<br />
  `mfi` , `mfai` - внешний ключ на manufacturerList.i<br />
  `pi` , `pai` - внешний ключ на productList.i<br />
  `ns`, `nsa` - стандартизированный номер(без спец.символов)<br />
  `_int` - не нужно на текущем этапе.
  
  
  Уникальный индекс при манипуляциях: mfi + "." + ns - точно определяет деталь.
  									mfai + "." + nsa - точно кросс(аналог). 
